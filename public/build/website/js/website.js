angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function($document,$window){function getStyle(el,cssprop){if(el.currentStyle){return el.currentStyle[cssprop]}else if($window.getComputedStyle){return $window.getComputedStyle(el)[cssprop]}return el.style[cssprop]}function isStaticPositioned(element){return(getStyle(element,"position")||"static")==="static"}var parentOffsetEl=function(element){var docDomEl=$document[0];var offsetParent=element.offsetParent||docDomEl;while(offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent)){offsetParent=offsetParent.offsetParent}return offsetParent||docDomEl};return{position:function(element){var elBCR=this.offset(element);var offsetParentBCR={top:0,left:0};var offsetParentEl=parentOffsetEl(element[0]);if(offsetParentEl!==$document[0]){offsetParentBCR=this.offset(angular.element(offsetParentEl));offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop;offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft}var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function(hostEl,targetEl,positionStr,appendToBody){var positionStrParts=positionStr.split("-");var pos0=positionStrParts[0],pos1=positionStrParts[1]||"center";var hostElPos,targetElWidth,targetElHeight,targetElPos;hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl);targetElWidth=targetEl.prop("offsetWidth");targetElHeight=targetEl.prop("offsetHeight");var shiftWidth={center:function(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function(){return hostElPos.left},right:function(){return hostElPos.left+hostElPos.width}};var shiftHeight={center:function(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function(){return hostElPos.top},bottom:function(){return hostElPos.top+hostElPos.height}};switch(pos0){case"right":targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case"left":targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case"bottom":targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()}}return targetElPos}}}]);angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++){if(key===stack[i].key){return stack[i]}}},keys:function(){var keys=[];for(var i=0;i<stack.length;i++){keys.push(stack[i].key)}return keys},top:function(){return stack[stack.length-1]},remove:function(key){var idx=-1;for(var i=0;i<stack.length;i++){if(key===stack[i].key){idx=i;break}}return stack.splice(idx,1)[0]},removeTop:function(){return stack.splice(stack.length-1,1)[0]},length:function(){return stack.length}}}}});angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function($document,$rootScope){var openScope=null;this.open=function(dropdownScope){if(!openScope){$document.on("click",closeDropdown);$document.on("keydown",keybindFilter)}if(openScope&&openScope!==dropdownScope){openScope.isOpen=false}openScope=dropdownScope};this.close=function(dropdownScope){if(openScope===dropdownScope){openScope=null;$document.off("click",closeDropdown);$document.off("keydown",keybindFilter)}};var closeDropdown=function(evt){if(!openScope){return}if(evt&&openScope.getAutoClose()==="disabled"){return}var toggleElement=openScope.getToggleElement();if(evt&&toggleElement&&toggleElement[0].contains(evt.target)){return}var dropdownElement=openScope.getDropdownElement();if(evt&&openScope.getAutoClose()==="outsideClick"&&dropdownElement&&dropdownElement[0].contains(evt.target)){return}openScope.isOpen=false;if(!$rootScope.$$phase){openScope.$apply()}};var keybindFilter=function(evt){if(evt.which===27){openScope.focusToggleElement();closeDropdown()}else if(openScope.isKeynavEnabled()&&[38,40].indexOf(evt.which)!==-1&&openScope.isOpen){evt.preventDefault();evt.stopPropagation();openScope.focusDropdownEntry(evt.which)}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function($scope,$element,$attrs,$parse,dropdownConfig,uibDropdownService,$animate,$position,$document,$compile,$templateRequest){var self=this,scope=$scope.$new(),templateScope,appendToOpenClass=dropdownConfig.appendToOpenClass,openClass=dropdownConfig.openClass,getIsOpen,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop,appendToBody=false,appendTo=null,keynavEnabled=false,selectedOption=null,body=$document.find("body");$element.addClass("dropdown");this.init=function(){if($attrs.isOpen){getIsOpen=$parse($attrs.isOpen);setIsOpen=getIsOpen.assign;$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value})}if(angular.isDefined($attrs.dropdownAppendTo)){var appendToEl=$parse($attrs.dropdownAppendTo)(scope);if(appendToEl){appendTo=angular.element(appendToEl)}}appendToBody=angular.isDefined($attrs.dropdownAppendToBody);keynavEnabled=angular.isDefined($attrs.keyboardNav);if(appendToBody&&!appendTo){appendTo=body}if(appendTo&&self.dropdownMenu){appendTo.append(self.dropdownMenu);$element.on("$destroy",function handleDestroyEvent(){self.dropdownMenu.remove()})}};this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen};this.isOpen=function(){return scope.isOpen};scope.getToggleElement=function(){return self.toggleElement};scope.getAutoClose=function(){return $attrs.autoClose||"always"};scope.getElement=function(){return $element};scope.isKeynavEnabled=function(){return keynavEnabled};scope.focusDropdownEntry=function(keyCode){var elems=self.dropdownMenu?angular.element(self.dropdownMenu).find("a"):$element.find("ul").eq(0).find("a");switch(keyCode){case 40:{if(!angular.isNumber(self.selectedOption)){self.selectedOption=0}else{self.selectedOption=self.selectedOption===elems.length-1?self.selectedOption:self.selectedOption+1}break}case 38:{if(!angular.isNumber(self.selectedOption)){self.selectedOption=elems.length-1}else{self.selectedOption=self.selectedOption===0?0:self.selectedOption-1}break}}elems[self.selectedOption].focus()};scope.getDropdownElement=function(){return self.dropdownMenu};scope.focusToggleElement=function(){if(self.toggleElement){self.toggleElement[0].focus()}};scope.$watch("isOpen",function(isOpen,wasOpen){if(appendTo&&self.dropdownMenu){var pos=$position.positionElements($element,self.dropdownMenu,"bottom-left",true),css,rightalign;css={top:pos.top+"px",display:isOpen?"block":"none"};rightalign=self.dropdownMenu.hasClass("dropdown-menu-right");if(!rightalign){css.left=pos.left+"px";css.right="auto"}else{css.left="auto";css.right=window.innerWidth-(pos.left+$element.prop("offsetWidth"))+"px"}if(!appendToBody){var appendOffset=$position.offset(appendTo);css.top=pos.top-appendOffset.top+"px";if(!rightalign){css.left=pos.left-appendOffset.left+"px"}else{css.right=window.innerWidth-(pos.left-appendOffset.left+$element.prop("offsetWidth"))+"px"}}self.dropdownMenu.css(css)}var openContainer=appendTo?appendTo:$element;$animate[isOpen?"addClass":"removeClass"](openContainer,appendTo?appendToOpenClass:openClass).then(function(){if(angular.isDefined(isOpen)&&isOpen!==wasOpen){toggleInvoker($scope,{open:!!isOpen})}});if(isOpen){if(self.dropdownMenuTemplateUrl){$templateRequest(self.dropdownMenuTemplateUrl).then(function(tplContent){templateScope=scope.$new();$compile(tplContent.trim())(templateScope,function(dropdownElement){var newEl=dropdownElement;self.dropdownMenu.replaceWith(newEl);self.dropdownMenu=newEl})})}scope.focusToggleElement();uibDropdownService.open(scope)}else{if(self.dropdownMenuTemplateUrl){if(templateScope){templateScope.$destroy()}var newEl=angular.element('<ul class="dropdown-menu"></ul>');self.dropdownMenu.replaceWith(newEl);self.dropdownMenu=newEl}uibDropdownService.close(scope);self.selectedOption=null}if(angular.isFunction(setIsOpen)){setIsOpen($scope,isOpen)}});$scope.$on("$locationChangeSuccess",function(){if(scope.getAutoClose()!=="disabled"){scope.isOpen=false}})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"AC",require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(!dropdownCtrl||angular.isDefined(attrs.dropdownNested)){return}element.addClass("dropdown-menu");var tplUrl=attrs.templateUrl;if(tplUrl){dropdownCtrl.dropdownMenuTemplateUrl=tplUrl}if(!dropdownCtrl.dropdownMenu){dropdownCtrl.dropdownMenu=element}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(!dropdownCtrl){return}element.addClass("dropdown-toggle");dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault();if(!element.hasClass("disabled")&&!attrs.disabled){scope.$apply(function(){dropdownCtrl.toggle()})}};element.bind("click",toggleDropdown);element.attr({"aria-haspopup":true,"aria-expanded":false});scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)});scope.$on("$destroy",function(){element.unbind("click",toggleDropdown)})}}});(function(window,angular,undefined){"use strict";var isDefined=angular.isDefined,isUndefined=angular.isUndefined,isNumber=angular.isNumber,isObject=angular.isObject,isArray=angular.isArray,extend=angular.extend,toJson=angular.toJson;var angularLocalStorage=angular.module("LocalStorageModule",[]);angularLocalStorage.provider("localStorageService",function(){this.prefix="ls";this.storageType="localStorage";this.cookie={expiry:30,path:"/"};this.notify={setItem:true,removeItem:false};this.setPrefix=function(prefix){this.prefix=prefix;return this};this.setStorageType=function(storageType){this.storageType=storageType;return this};this.setStorageCookie=function(exp,path){this.cookie.expiry=exp;this.cookie.path=path;return this};this.setStorageCookieDomain=function(domain){this.cookie.domain=domain;return this};this.setNotify=function(itemSet,itemRemove){this.notify={setItem:itemSet,removeItem:itemRemove};return this};this.$get=["$rootScope","$window","$document","$parse",function($rootScope,$window,$document,$parse){var self=this;var prefix=self.prefix;var cookie=self.cookie;var notify=self.notify;var storageType=self.storageType;var webStorage;if(!$document){$document=document}else if($document[0]){$document=$document[0]}if(prefix.substr(-1)!=="."){prefix=!!prefix?prefix+".":""}var deriveQualifiedKey=function(key){return prefix+key};var browserSupportsLocalStorage=function(){try{var supported=storageType in $window&&$window[storageType]!==null;var key=deriveQualifiedKey("__"+Math.round(Math.random()*1e7));if(supported){webStorage=$window[storageType];webStorage.setItem(key,"");webStorage.removeItem(key)}return supported}catch(e){storageType="cookie";$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return false}}();var addToLocalStorage=function(key,value){if(isUndefined(value)){value=null}else{value=toJson(value)}if(!browserSupportsLocalStorage||self.storageType==="cookie"){if(!browserSupportsLocalStorage){$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED")}if(notify.setItem){$rootScope.$broadcast("LocalStorageModule.notification.setitem",{key:key,newvalue:value,storageType:"cookie"})}return addToCookies(key,value)}try{if(webStorage){webStorage.setItem(deriveQualifiedKey(key),value)}if(notify.setItem){$rootScope.$broadcast("LocalStorageModule.notification.setitem",{key:key,newvalue:value,storageType:self.storageType})}}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return addToCookies(key,value)}return true};var getFromLocalStorage=function(key){if(!browserSupportsLocalStorage||self.storageType==="cookie"){if(!browserSupportsLocalStorage){$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED")}return getFromCookies(key)}var item=webStorage?webStorage.getItem(deriveQualifiedKey(key)):null;if(!item||item==="null"){return null}try{return JSON.parse(item)}catch(e){return item}};var removeFromLocalStorage=function(){var i,key;for(i=0;i<arguments.length;i++){key=arguments[i];if(!browserSupportsLocalStorage||self.storageType==="cookie"){if(!browserSupportsLocalStorage){$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED")}if(notify.removeItem){$rootScope.$broadcast("LocalStorageModule.notification.removeitem",{key:key,storageType:"cookie"})}removeFromCookies(key)}else{try{webStorage.removeItem(deriveQualifiedKey(key));if(notify.removeItem){$rootScope.$broadcast("LocalStorageModule.notification.removeitem",{key:key,storageType:self.storageType})}}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);removeFromCookies(key)}}}};var getKeysForLocalStorage=function(){if(!browserSupportsLocalStorage){$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");return false}var prefixLength=prefix.length;var keys=[];for(var key in webStorage){if(key.substr(0,prefixLength)===prefix){try{keys.push(key.substr(prefixLength))}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.Description);return[]}}}return keys};var clearAllFromLocalStorage=function(regularExpression){var prefixRegex=!!prefix?new RegExp("^"+prefix):new RegExp;var testRegex=!!regularExpression?new RegExp(regularExpression):new RegExp;if(!browserSupportsLocalStorage||self.storageType==="cookie"){if(!browserSupportsLocalStorage){$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED")}return clearAllFromCookies()}var prefixLength=prefix.length;for(var key in webStorage){if(prefixRegex.test(key)&&testRegex.test(key.substr(prefixLength))){try{removeFromLocalStorage(key.substr(prefixLength))}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return clearAllFromCookies()}}}return true};var browserSupportsCookies=function(){try{return $window.navigator.cookieEnabled||"cookie"in $document&&($document.cookie.length>0||($document.cookie="test").indexOf.call($document.cookie,"test")>-1)}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return false}}();var addToCookies=function(key,value,daysToExpiry){if(isUndefined(value)){return false}else if(isArray(value)||isObject(value)){value=toJson(value)}if(!browserSupportsCookies){$rootScope.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED");return false}try{var expiry="",expiryDate=new Date,cookieDomain="";if(value===null){expiryDate.setTime(expiryDate.getTime()+-1*24*60*60*1e3);expiry="; expires="+expiryDate.toGMTString();value=""}else if(isNumber(daysToExpiry)&&daysToExpiry!==0){expiryDate.setTime(expiryDate.getTime()+daysToExpiry*24*60*60*1e3);expiry="; expires="+expiryDate.toGMTString()}else if(cookie.expiry!==0){expiryDate.setTime(expiryDate.getTime()+cookie.expiry*24*60*60*1e3);expiry="; expires="+expiryDate.toGMTString()}if(!!key){var cookiePath="; path="+cookie.path;if(cookie.domain){cookieDomain="; domain="+cookie.domain}$document.cookie=deriveQualifiedKey(key)+"="+encodeURIComponent(value)+expiry+cookiePath+cookieDomain}}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return false}return true};var getFromCookies=function(key){if(!browserSupportsCookies){$rootScope.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED");return false}var cookies=$document.cookie&&$document.cookie.split(";")||[];for(var i=0;i<cookies.length;i++){var thisCookie=cookies[i];while(thisCookie.charAt(0)===" "){thisCookie=thisCookie.substring(1,thisCookie.length)}if(thisCookie.indexOf(deriveQualifiedKey(key)+"=")===0){var storedValues=decodeURIComponent(thisCookie.substring(prefix.length+key.length+1,thisCookie.length));try{return JSON.parse(storedValues)}catch(e){return storedValues}}}return null};var removeFromCookies=function(key){addToCookies(key,null)};var clearAllFromCookies=function(){var thisCookie=null,thisKey=null;var prefixLength=prefix.length;var cookies=$document.cookie.split(";");for(var i=0;i<cookies.length;i++){thisCookie=cookies[i];while(thisCookie.charAt(0)===" "){thisCookie=thisCookie.substring(1,thisCookie.length)}var key=thisCookie.substring(prefixLength,thisCookie.indexOf("="));removeFromCookies(key)}};var getStorageType=function(){return storageType};var bindToScope=function(scope,key,def,lsKey){lsKey=lsKey||key;var value=getFromLocalStorage(lsKey);if(value===null&&isDefined(def)){value=def}else if(isObject(value)&&isObject(def)){value=extend(def,value)}$parse(key).assign(scope,value);return scope.$watch(key,function(newVal){addToLocalStorage(lsKey,newVal)},isObject(scope[key]))};var lengthOfLocalStorage=function(){var count=0;var storage=$window[storageType];for(var i=0;i<storage.length;i++){if(storage.key(i).indexOf(prefix)===0){count++}}return count};return{isSupported:browserSupportsLocalStorage,getStorageType:getStorageType,set:addToLocalStorage,add:addToLocalStorage,get:getFromLocalStorage,keys:getKeysForLocalStorage,remove:removeFromLocalStorage,clearAll:clearAllFromLocalStorage,bind:bindToScope,deriveKey:deriveQualifiedKey,length:lengthOfLocalStorage,cookie:{isSupported:browserSupportsCookies,set:addToCookies,add:addToCookies,get:getFromCookies,remove:removeFromCookies,clearAll:clearAllFromCookies}}}]})})(window,window.angular);angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function(){var map={};return{entries:function(){return Object.keys(map).map(function(key){return{key:key,value:map[key]}})},get:function(key){return map[key]},hasKey:function(key){return!!map[key]},keys:function(){return Object.keys(map)},put:function(key,value){if(!map[key]){map[key]=[]}map[key].push(value)},remove:function(key,value){var values=map[key];if(!values){return}var idx=values.indexOf(value);if(idx!==-1){values.splice(idx,1)}if(!values.length){delete map[key]}}}}}}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function($animate,$injector,$modalStack){var $animateCss=null;if($injector.has("$animateCss")){$animateCss=$injector.get("$animateCss")}return{replace:true,templateUrl:"/build/uib/template/modal/backdrop.html",compile:function(tElement,tAttrs){tElement.addClass(tAttrs.backdropClass);return linkFn}};function linkFn(scope,element,attrs){element.addClass("modal-backdrop");if(attrs.modalInClass){if($animateCss){$animateCss(element,{addClass:attrs.modalInClass}).start()}else{$animate.addClass(element,attrs.modalInClass)}scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();if(scope.modalOptions.animation){if($animateCss){$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done)}else{$animate.removeClass(element,attrs.modalInClass).then(done)}}else{done()}})}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animate","$animateCss","$document",function($modalStack,$q,$animate,$animateCss,$document){return{scope:{index:"@"},replace:true,transclude:true,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"/build/uib/template/modal/window.html"},link:function(scope,element,attrs){element.addClass(attrs.windowClass||"");element.addClass(attrs.windowTopClass||"");scope.size=attrs.size;scope.close=function(evt){var modal=$modalStack.getTop();if(modal&&modal.value.backdrop&&modal.value.backdrop!=="static"&&evt.target===evt.currentTarget){evt.preventDefault();evt.stopPropagation();$modalStack.dismiss(modal.key,"backdrop click")}};element.on("click",scope.close);scope.$isRendered=true;var modalRenderDeferObj=$q.defer();attrs.$observe("modalRender",function(value){if(value==="true"){modalRenderDeferObj.resolve()}});modalRenderDeferObj.promise.then(function(){var animationPromise=null;if(attrs.modalInClass){animationPromise=$animateCss(element,{addClass:attrs.modalInClass}).start();scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();if($animateCss){$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done)}else{$animate.removeClass(element,attrs.modalInClass).then(done)}})}$q.when(animationPromise).then(function(){if(!($document[0].activeElement&&element[0].contains($document[0].activeElement))){var inputWithAutofocus=element[0].querySelector("[autofocus]");if(inputWithAutofocus){inputWithAutofocus.focus()}else{element[0].focus()}}});var modal=$modalStack.getTop();if(modal){$modalStack.modalRendered(modal.key)}})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(tElement,tAttrs){if(tAttrs.modalAnimation){tElement.addClass(tAttrs.uibModalAnimationClass)}}}}).directive("uibModalTransclude",function(){return{link:function($scope,$element,$attrs,controller,$transclude){$transclude($scope.$parent,function(clone){$element.empty();$element.append(clone)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap",function($animate,$animateCss,$document,$compile,$rootScope,$q,$$multiMap,$$stackedMap){var OPENED_MODAL_CLASS="modal-open";var backdropDomEl,backdropScope;var openedWindows=$$stackedMap.createNew();var openedClasses=$$multiMap.createNew();var $modalStack={NOW_CLOSING_EVENT:"modal.stack.now-closing"};var focusableElementList;var focusIndex=0;var tababbleSelector="a[href], area[href], input:not([disabled]), "+"button:not([disabled]),select:not([disabled]), textarea:not([disabled]), "+"iframe, object, embed, *[tabindex], *[contenteditable=true]";function backdropIndex(){var topBackdropIndex=-1;var opened=openedWindows.keys();for(var i=0;i<opened.length;i++){if(openedWindows.get(opened[i]).value.backdrop){topBackdropIndex=i}}return topBackdropIndex}$rootScope.$watch(backdropIndex,function(newBackdropIndex){if(backdropScope){backdropScope.index=newBackdropIndex}});function removeModalWindow(modalInstance,elementToReceiveFocus){var modalWindow=openedWindows.get(modalInstance).value;var appendToElement=modalWindow.appendTo;openedWindows.remove(modalInstance);removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,function(){var modalBodyClass=modalWindow.openedClass||OPENED_MODAL_CLASS;openedClasses.remove(modalBodyClass,modalInstance);appendToElement.toggleClass(modalBodyClass,openedClasses.hasKey(modalBodyClass));toggleTopWindowClass(true)});checkRemoveBackdrop();if(elementToReceiveFocus&&elementToReceiveFocus.focus){elementToReceiveFocus.focus()}else{appendToElement.focus()}}function toggleTopWindowClass(toggleSwitch){var modalWindow;if(openedWindows.length()>0){modalWindow=openedWindows.top().value;modalWindow.modalDomEl.toggleClass(modalWindow.windowTopClass||"",toggleSwitch)}}function checkRemoveBackdrop(){if(backdropDomEl&&backdropIndex()===-1){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,function(){backdropScopeRef=null});backdropDomEl=undefined;backdropScope=undefined}}function removeAfterAnimate(domEl,scope,done){var asyncDeferred;var asyncPromise=null;var setIsAsync=function(){if(!asyncDeferred){asyncDeferred=$q.defer();asyncPromise=asyncDeferred.promise}return function asyncDone(){asyncDeferred.resolve()}};scope.$broadcast($modalStack.NOW_CLOSING_EVENT,setIsAsync);return $q.when(asyncPromise).then(afterAnimating);function afterAnimating(){if(afterAnimating.done){return}afterAnimating.done=true;$animateCss(domEl,{event:"leave"}).start().then(function(){domEl.remove()});scope.$destroy();if(done){done()}}}$document.bind("keydown",function(evt){if(evt.isDefaultPrevented()){return evt}var modal=openedWindows.top();if(modal&&modal.value.keyboard){switch(evt.which){case 27:{evt.preventDefault();$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")});break}case 9:{$modalStack.loadFocusElementList(modal);var focusChanged=false;if(evt.shiftKey){if($modalStack.isFocusInFirstItem(evt)){focusChanged=$modalStack.focusLastFocusableElement()}}else{if($modalStack.isFocusInLastItem(evt)){focusChanged=$modalStack.focusFirstFocusableElement()}}if(focusChanged){evt.preventDefault();evt.stopPropagation()}break}}}});$modalStack.open=function(modalInstance,modal){var modalOpener=$document[0].activeElement,modalBodyClass=modal.openedClass||OPENED_MODAL_CLASS;toggleTopWindowClass(false);openedWindows.add(modalInstance,{deferred:modal.deferred,renderDeferred:modal.renderDeferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard,openedClass:modal.openedClass,windowTopClass:modal.windowTopClass,animation:modal.animation,appendTo:modal.appendTo});openedClasses.put(modalBodyClass,modalInstance);var appendToElement=modal.appendTo,currBackdropIndex=backdropIndex();if(!appendToElement.length){throw new Error("appendTo element not found. Make sure that the element passed is in DOM.")}if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(true);backdropScope.modalOptions=modal;backdropScope.index=currBackdropIndex;var angularBackgroundDomEl=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>');angularBackgroundDomEl.attr("backdrop-class",modal.backdropClass);if(modal.animation){angularBackgroundDomEl.attr("modal-animation","true")}backdropDomEl=$compile(angularBackgroundDomEl)(backdropScope);$animate.enter(backdropDomEl,appendToElement)}var angularDomEl=angular.element('<div uib-modal-window="modal-window"></div>');angularDomEl.attr({"template-url":modal.windowTemplateUrl,"window-class":modal.windowClass,"window-top-class":modal.windowTopClass,size:modal.size,index:openedWindows.length()-1,animate:"animate"}).html(modal.content);if(modal.animation){angularDomEl.attr("modal-animation","true")}$animate.enter(angularDomEl,appendToElement).then(function(){$compile(angularDomEl)(modal.scope);$animate.addClass(appendToElement,modalBodyClass)});openedWindows.top().value.modalDomEl=angularDomEl;openedWindows.top().value.modalOpener=modalOpener;$modalStack.clearFocusListCache()};function broadcastClosing(modalWindow,resultOrReason,closing){return!modalWindow.value.modalScope.$broadcast("modal.closing",resultOrReason,closing).defaultPrevented}$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);if(modalWindow&&broadcastClosing(modalWindow,result,true)){modalWindow.value.modalScope.$$uibDestructionScheduled=true;modalWindow.value.deferred.resolve(result);removeModalWindow(modalInstance,modalWindow.value.modalOpener);return true}return!modalWindow};$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);if(modalWindow&&broadcastClosing(modalWindow,reason,false)){modalWindow.value.modalScope.$$uibDestructionScheduled=true;modalWindow.value.deferred.reject(reason);removeModalWindow(modalInstance,modalWindow.value.modalOpener);return true}return!modalWindow};$modalStack.dismissAll=function(reason){var topModal=this.getTop();while(topModal&&this.dismiss(topModal.key,reason)){topModal=this.getTop()}};$modalStack.getTop=function(){return openedWindows.top()};$modalStack.modalRendered=function(modalInstance){var modalWindow=openedWindows.get(modalInstance);if(modalWindow){modalWindow.value.renderDeferred.resolve()}};$modalStack.focusFirstFocusableElement=function(){if(focusableElementList.length>0){focusableElementList[0].focus();return true}return false};$modalStack.focusLastFocusableElement=function(){if(focusableElementList.length>0){focusableElementList[focusableElementList.length-1].focus();return true}return false};$modalStack.isFocusInFirstItem=function(evt){if(focusableElementList.length>0){return(evt.target||evt.srcElement)===focusableElementList[0]}return false};$modalStack.isFocusInLastItem=function(evt){if(focusableElementList.length>0){return(evt.target||evt.srcElement)===focusableElementList[focusableElementList.length-1]}return false};$modalStack.clearFocusListCache=function(){focusableElementList=[];focusIndex=0};$modalStack.loadFocusElementList=function(modalWindow){if(focusableElementList===undefined||!focusableElementList.length){if(modalWindow){var modalDomE1=modalWindow.value.modalDomEl;if(modalDomE1&&modalDomE1.length){focusableElementList=modalDomE1[0].querySelectorAll(tababbleSelector)}}}};return $modalStack}]).provider("$uibModal",function(){var $modalProvider={options:{animation:true,backdrop:true,keyboard:true},$get:["$injector","$rootScope","$q","$document","$templateRequest","$controller","$uibModalStack",function($injector,$rootScope,$q,$document,$templateRequest,$controller,$modalStack){var $modal={};function getTemplatePromise(options){return options.template?$q.when(options.template):$templateRequest(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl)}function getResolvePromises(resolves){var promisesArr=[];angular.forEach(resolves,function(value){if(angular.isFunction(value)||angular.isArray(value)){promisesArr.push($q.when($injector.invoke(value)))}else if(angular.isString(value)){promisesArr.push($q.when($injector.get(value)))}else{promisesArr.push($q.when(value))}});return promisesArr}var promiseChain=null;$modal.getPromiseChain=function(){return promiseChain};$modal.open=function(modalOptions){var modalResultDeferred=$q.defer();var modalOpenedDeferred=$q.defer();var modalRenderDeferred=$q.defer();var modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,rendered:modalRenderDeferred.promise,close:function(result){return $modalStack.close(modalInstance,result)},dismiss:function(reason){return $modalStack.dismiss(modalInstance,reason)}};modalOptions=angular.extend({},$modalProvider.options,modalOptions);modalOptions.resolve=modalOptions.resolve||{};modalOptions.appendTo=modalOptions.appendTo||$document.find("body").eq(0);if(!modalOptions.template&&!modalOptions.templateUrl){throw new Error("One of template or templateUrl options is required.")}var templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));function resolveWithTemplate(){return templateAndResolvePromise}var samePromise;samePromise=promiseChain=$q.all([promiseChain]).then(resolveWithTemplate,resolveWithTemplate).then(function resolveSuccess(tplAndVars){var modalScope=(modalOptions.scope||$rootScope).$new();modalScope.$close=modalInstance.close;modalScope.$dismiss=modalInstance.dismiss;modalScope.$on("$destroy",function(){if(!modalScope.$$uibDestructionScheduled){modalScope.$dismiss("$uibUnscheduledDestruction")}});var ctrlInstance,ctrlLocals={};var resolveIter=1;if(modalOptions.controller){ctrlLocals.$scope=modalScope;ctrlLocals.$uibModalInstance=modalInstance;angular.forEach(modalOptions.resolve,function(value,key){ctrlLocals[key]=tplAndVars[resolveIter++]});ctrlInstance=$controller(modalOptions.controller,ctrlLocals);if(modalOptions.controllerAs){if(modalOptions.bindToController){angular.extend(ctrlInstance,modalScope)}modalScope[modalOptions.controllerAs]=ctrlInstance}}$modalStack.open(modalInstance,{
scope:modalScope,deferred:modalResultDeferred,renderDeferred:modalRenderDeferred,content:tplAndVars[0],animation:modalOptions.animation,backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowTopClass:modalOptions.windowTopClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,size:modalOptions.size,openedClass:modalOptions.openedClass,appendTo:modalOptions.appendTo});modalOpenedDeferred.resolve(true)},function resolveError(reason){modalOpenedDeferred.reject(reason);modalResultDeferred.reject(reason)})["finally"](function(){if(promiseChain===samePromise){promiseChain=null}});return modalInstance};return $modal}]};return $modalProvider});(function(angular){angular.module("app",["siteConfig","ngAnimate","LocalStorageModule","ui.bootstrap.dropdown","ui.bootstrap.modal"])})(angular);(function(module){module.constant("LOCAL_STORAGE_KEYS",{AUTO_PLAY_VIDEO:"auto-play-video"});module.constant("SITE",{GOOGLE_MAPS_KEY:"AIzaSyBkH5rBySTyP0S6q2nCFGOz3Mj2oBpNECw"})})(angular.module("app"));(function(module){"use strict";module.factory("campusesService",service);service.$inject=["$http"];function service($http){return{all:function(){return $http.get("/api/campuses")}}}})(angular.module("app"));(function(module){"use strict";module.filter("age",filter);function filter(){return function(birthday){var birth_date=Date.parse(birthday),age_dif_ms=Date.now()-birth_date,age_date=new Date(age_dif_ms);return Math.abs(age_date.getUTCFullYear()-1970)}}})(angular.module("app"));(function(module){"use strict";module.controller("countdown",controller);controller.$inject=["$scope","countdownService"];function controller($scope,countdownService){$scope.countdown=countdownService.data}})(angular.module("app"));(function(module,Waypoint){"use strict";module.directive("contentScroll",directive);directive.$inject=["$animate","$timeout"];function directive($animate,$timeout){return{restrict:"A",link:Link};function Link(scope,elem,attr){var nav=document.getElementById("js-nav"),navHeight=60,navStickyClass="sticky-yes",navNoStickyClass="sticky-no";new Waypoint({element:elem[0],handler:function(direction){if(direction==="down"){angular.element(nav).removeClass(navNoStickyClass);$timeout(function(){$animate.addClass(angular.element(nav),navStickyClass)})}}});new Waypoint({element:elem[0],offset:navHeight,handler:function(direction){if(direction==="up"){angular.element(nav).removeClass(navStickyClass);scope.$apply(function(){$animate.addClass(angular.element(nav),navNoStickyClass)})}}})}}})(angular.module("app"),window.Waypoint);(function(module){"use strict";module.directive("facebookShare",directive);directive.$inject=["$window"];function directive($window){return{restrict:"A",link:Link};function Link(scope,elem,attr){elem.on("click",function(){var shareUrl=fullUrl(attr.facebookShare||$window.location.href);FB.ui({method:"share",href:shareUrl},function(response){})})}function fullUrl(url){var baseUrl=$window.location.protocol+"//"+$window.location.hostname+($window.location.port!==80?":"+$window.location.port:"");if(url.charAt(0)==="/"){return baseUrl+url}return url}}})(angular.module("app"));(function(module){"use strict";module.directive("focusInView",directive);directive.$inject=["$window","$timeout"];function directive($window,$timeout){return{restrict:"A",scope:{focusInView:"@"},link:Link};function Link(scope,elem){var timer,timeout=2e3,offset=parseInt(scope.focusInView)||100;angular.element($window).on("scroll",onScroll);function onScroll(){if(timer)return;timer=$timeout(function(){console.log("focus timer",new Date);var top=elem[0].getBoundingClientRect().top;var diff=$window.innerHeight-top;console.log("diff",diff);if(diff>offset){angular.element($window).off("scroll",onScroll);elem[0].focus()}timeout=300;timer=null},timeout)}}}})(angular.module("app"));(function(module){module.directive("icampusCountdown",directive);function directive(){return{templateUrl:"/build/website/js/directives/icampus-countdown/icampus-countdown.html?v=1",transclude:true,restrict:"A",controller:Controller,controllerAs:"vm",bindToController:true,scope:{times:"@",image:"@",liveImage:"@",seriesTitle:"@"}}}Controller.$inject=["$scope","countdownService"];function Controller(scope,countdownService){scope.countdown=countdownService.data}})(angular.module("app"));(function(module,angular){"use strict";module.directive("linkTo",directive);directive.$inject=["$window"];function directive($window){return{restrict:"A",link:function(scope,elem,attr){if(!attr.linkTo){return}angular.element(elem).addClass("clickable");elem.on("click",function(e){if(e.target.tagName!=="A"){$window.location.href=attr.linkTo}})}}}})(angular.module("app"),angular);(function(module,angular){"use strict";module.directive("navToggle",directive);directive.$inject=["$document"];function directive($document){return{restrict:"A",link:function(scope,elem){var body=$document[0].body;elem.on("click",function(){angular.element(body).toggleClass("is-navOpen")})},scope:{}}}})(angular.module("app"),angular);(function(module){"use strict";module.directive("publishOn",directive);function directive(){return{restrict:"A",link:Link}}function Link(scope,elem,attr){var now=new Date,publish_date=new Date(attr.publishOn);if(publish_date<=now){elem.addClass("publish-on-show")}}})(angular.module("app"));(function(module){"use strict";module.directive("videoLink",directive);directive.$inject=["localStorageService","LOCAL_STORAGE_KEYS"];function directive(localStorageService,LOCAL_STORAGE_KEYS){return{restrict:"A",link:Link,scope:{}};function Link(scope,elem,attr){elem.on("click",function(e){localStorageService.set(LOCAL_STORAGE_KEYS.AUTO_PLAY_VIDEO,attr.href)})}}})(angular.module("app"));(function(module){"use strict";module.directive("vimeo",directive);function directive(){return{template:'<div class="VideoPlayer"><iframe ng-src="{{ src }}" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>',restrict:"E",controller:Controller,scope:{id:"@",autoplay:"="}}}Controller.$inject=["$scope","$sce","$window","localStorageService","LOCAL_STORAGE_KEYS"];function Controller($scope,$sce,$window,localStorageService,LOCAL_STORAGE_KEYS){init();removeAutoPlay();function init(){var autoplay=shouldAutoPlay();console.log("autoplay: ",typeof $scope.autoplay,$scope.autoplay);$scope.src=$sce.trustAsResourceUrl("https://player.vimeo.com/video/"+$scope.id+"?title=0&byline=0&portrait=0&badge=0&autoplay="+autoplay)}function shouldAutoPlay(){return $scope.autoplay||localStorageService.get(LOCAL_STORAGE_KEYS.AUTO_PLAY_VIDEO)==$window.location.pathname?1:0}function removeAutoPlay(){localStorageService.remove(LOCAL_STORAGE_KEYS.AUTO_PLAY_VIDEO)}}})(angular.module("app"));(function(module){"use strict";module.directive("volunteerPosition",directive);function directive(){return{templateUrl:"/build/website/js/directives/volunteer-positions/volunteer-position.html",restrict:"E",controller:Controller,controllerAs:"vm",bindToController:true,scope:{position:"=",isSelected:"=",onToggle:"&"}}}Controller.$inject=["$sce"];function Controller($sce){var vm=this;vm.skills=null;vm.toggle=toggle;vm.get_description=get_description;init();function init(){vm.skills=get_skills_list()}function toggle(){vm.onToggle({position:vm.position})}function get_description(){return $sce.trustAsHtml(vm.position.description)}function get_skills_list(){var i,skills=[];if(typeof vm.position.skills==="undefined"||vm.position.skills.length===0){return null}for(i=0;i<vm.position.skills.length;i++){skills.push(vm.position.skills[i].title)}return skills.join(", ")}}})(angular.module("app"));(function(module){"use strict";module.directive("volunteerPositions",directive);directive.$inject=["$window","$timeout"];function directive($window,$timeout){return{templateUrl:"/build/website/js/directives/volunteer-positions/volunteer-positions.html",restrict:"E",controller:Controller,controllerAs:"vm",scope:{},link:function(scope,elem){var timer,timeout=2e3;angular.element($window).on("scroll",function(){if(timer)return;timer=$timeout(function(){scope.vm.is_form_in_view=is_form_in_view();$timeout.cancel(timer);timer=null;timeout=300},timeout)})}}}Controller.$inject=["$http","campusesService"];function Controller($http,campusesService){var selected_position_ids=[],vm=this;vm.user={first_name:"",last_name:"",email:"",phone:"",message_body:"",subject:"",campus:""};vm.show_continue_bar=false;vm.selected_positions=[];vm.campuses=null;vm.skills=null;vm.toggle_position=toggle_position;vm.is_selected=is_selected;vm.send_form=send_form;vm.selected_skill=null;vm.select_skill=select_skill;vm.deselect_skill=deselect_skill;vm.close_form_confirmation=close_form_confirmation;vm.is_form_in_view=false;init();function init(){$http.get("/serve/opportunities.json").then(function(response){vm.ministries=response.data});$http.get("/serve/opportunities.json?by=skill").then(function(response){vm.skills=response.data});campusesService.all().then(function(response){vm.campuses=response.data})}function toggle_position(position){var idx=selected_position_ids.indexOf(position.id);if(idx>=0){selected_position_ids.splice(idx,1);vm.selected_positions.splice(idx,1)}else{selected_position_ids.push(position.id);vm.selected_positions.push(position)}vm.user.message_body=build_description();vm.user.subject=build_subject()}function is_selected(position){return selected_position_ids.indexOf(position.id)>=0}function build_description(){var areas_list=build_areas_list();return"Please contact me with more information about the "+areas_list+" opportunities."}function build_subject(){return build_areas_list()}function build_areas_list(){var i,areas=[],areas_string="";if(vm.selected_positions.length===0){return""}for(i=0;i<vm.selected_positions.length;i++){areas.push(vm.selected_positions[i].title)}if(areas.length===1){areas_string=areas[0]}else if(areas.length===2){areas_string=areas.join(" and ")}else{areas[areas.length-1]="and "+areas[areas.length-1];areas_string=areas.join(", ")}return areas_string}function select_skill(skill){vm.selected_skill=skill}function deselect_skill(){vm.selected_skill=null}function send_form(){vm.is_sending=true;$http.post("/serve/opportunities",vm.user).then(on_form_success,on_form_error)}function on_form_success(){vm.is_sending=false;vm.is_sent=true;clear_selected_positions();clear_form()}function on_form_error(response){vm.is_sending=false;vm.has_error=true}function close_form_confirmation(){vm.is_sent=false}function clear_form(){vm.user.message_body="";vm.user.subject=""}function clear_selected_positions(){vm.selected_positions=[];selected_position_ids=[]}}function is_form_in_view(){var form_elem=document.getElementById("continue");var form_elem_top=form_elem.getBoundingClientRect().top;console.log("form_elem_top",form_elem_top);return window.innerHeight-form_elem_top>240}})(angular.module("app"));(function(module,Waypoint){"use strict";module.directive("waypointAddClass",directive);directive.$inject=["$animate"];function directive($animate){return{restrict:"A",link:Link};function Link(scope,elem,attr){var params=scope.$eval(attr.waypointAddClass);if(params.constructor!==Array){addWaypoint(elem[0],params);return}for(var i=0;i<params.length;i++){addWaypoint(elem[0],params[i])}function addWaypoint(elem,params){var options={element:elem,target:elem,addDirection:"down",handler:function(direction){if(direction===options.addDirection){console.log("options.target",options.target);console.log("options.class",options.class);scope.$apply(function(){$animate.addClass(angular.element(options.target),options.class)})}else{scope.$apply(function(){$animate.removeClass(angular.element(options.target),options.class)})}}};angular.extend(options,params);if(options.target.substring(0,1)==="#"){options.target=document.getElementById(options.target.substring(1))}else if(options.target==="body"){options.target=document.body}new Waypoint(options)}}}})(angular.module("app"),window.Waypoint);(function(module){"use strict";module.directive("groupsSearch",directive);function directive(){return{templateUrl:"/build/website/js/groups/groups-search.html",restrict:"E",controller:Controller,controllerAs:"vm",bindToController:true,scope:{}}}Controller.$inject=["groupsService"];function Controller(groupsService){var vm=this;init();function init(){groupsService.all().then(function(response){vm.groups=response.data})}}})(angular.module("app"));(function(module){"use strict";module.factory("groupsService",service);service.$inject=["$http"];function service($http){return{all:function(){return $http.get("/api/groups")}}}})(angular.module("app"));(function(){})();(function(){if(window.__twitterIntentHandler)return;var intentRegex=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/,facebookRegex=/facebook\.com(\:\d{2,4})?\/dialog\/(\w+)/,windowOptions="scrollbars=yes,resizable=yes,toolbar=no,location=yes",width=550,height=420,winHeight=screen.height,winWidth=screen.width;function handleIntent(e){e=e||window.event;var target=e.target||e.srcElement,m,left,top;while(target&&target.nodeName.toLowerCase()!=="a"){target=target.parentNode}if(target&&target.nodeName.toLowerCase()==="a"&&target.href){m=target.href.match(intentRegex)||target.href.match(facebookRegex);if(m){left=Math.round(winWidth/2-width/2);top=0;if(winHeight>height){top=Math.round(winHeight/2-height/2)}window.open(target.href,"intent",windowOptions+",width="+width+",height="+height+",left="+left+",top="+top);e.returnValue=false;e.preventDefault&&e.preventDefault()}}}if(document.addEventListener){document.addEventListener("click",handleIntent,false)}else if(document.attachEvent){document.attachEvent("onclick",handleIntent)}window.__twitterIntentHandler=true})();(function(module){"use strict";module.factory("countdownService",countdownService);countdownService.$inject=["$http","$timeout"];function countdownService($http,$timeout){var interval,live_interval,data={isLoaded:false};activate();return{data:data};function activate(){icampusFetch().then(icampusLoadCountdown)}function icampusFetch(){return $http.get("/countdown.js?v="+(new Date).getTime())}function icampusLoadCountdown(response){data.next=response.data.start;data.start=new Date(response.data.start_utc);data.human_start=response.data.human_start;data.human_start_time=response.data.human_start_time;icampusTick()}function icampusTick(){var secondsTill=(data.start-new Date)/1e3;var days=Math.floor(secondsTill/86400);var hours=Math.floor(secondsTill%86400/3600);var minutes=Math.floor(secondsTill%3600/60);var seconds=Math.floor(secondsTill%60);if(days<1&&hours<1&&minutes<1&&seconds<1){live_interval=$timeout(activate,3e5);data.heading="We're Live Online!";data.isLive=true;data.isLoaded=true;return}data.has_days=days>0;data.has_hours=hours>0||data.has_days;data.has_minutes=minutes>0||data.has_hours;data.days=days;data.hours=hours;data.minutes=minutes;data.seconds=seconds;data.isLive=false;data.isLoaded=true;if(days>=1){data.heading="Watch Online"}else if(hours>=1){data.heading="Live at "+data.human_start_time}else if(minutes>15){data.heading="Live in "+minutes+" Minute"+(minutes>1?"s":"")}else{data.heading="Live in "+(minutes>9?minutes:"0"+minutes)+":"+(seconds>9?seconds:"0"+seconds)}interval=$timeout(icampusTick,1e3)}}})(angular.module("app"));(function(module,angular){"use strict";module.directive("openVideoResources",directive);function directive(){return{restrict:"A",controller:Controller,controllerAs:"vm",bindToController:true,scope:{openVideoResources:"@"},link:function(scope,elem){angular.element(elem).on("click",function(){scope.vm.open_popup()})}}}Controller.$inject=["$uibModal","videosService","site","$sce"];function Controller($modal,videosService,site){var vm=this;vm.open_popup=open_popup;function open_popup(){$modal.open({animation:false,backdrop:"static",controller:modalController,controllerAs:"vm",templateUrl:"/build/website/js/video/video-resources-popup.html",windowClass:"VideoResources-modal",backdropClass:"VideoResources-backdrop",resolve:{video_id:function(){return vm.openVideoResources},videoService:function(){return videosService},site:function(){return site}}})}}modalController.$inject=["$uibModalInstance","video_id","videosService","site","$sce"];function modalController($modalInstance,video_id,videoService,site,$sce){var vm=this;init();vm.close=close;vm.get_resources=get_resources;console.log(site.logoMark);vm.logo_mark=site.logoMark;function init(){videoService.find(video_id).then(function(result){vm.video=result.data})}function close(){$modalInstance.close()}function get_resources(){return $sce.trustAsHtml(vm.video.resources)}}})(angular.module("app"),angular);(function(module,angular){"use strict";module.directive("openVideo",directive);function directive(){return{restrict:"A",controller:Controller,controllerAs:"vm",bindToController:true,scope:{openVideo:"@"},link:function(scope,elem){angular.element(elem).on("click",function(){scope.vm.open_popup()})}}}Controller.$inject=["$uibModal","videosService","vimeoService","site"];function Controller($modal,videosService,vimeoService,site){var vm=this;vm.open_popup=open_popup;function open_popup(){$modal.open({animation:false,backdrop:"static",controller:modalController,controllerAs:"vm",templateUrl:"/build/website/js/video/video-popup.html",windowClass:"VideoPopup-modal",backdropClass:"VideoPopup-backdrop",resolve:{video_id:function(){return vm.openVideo},videoService:function(){return videosService},vimeoService:function(){return vimeoService},site:function(){return site}}})}}modalController.$inject=["$uibModalInstance","video_id","videosService","vimeoService","site"];function modalController($modalInstance,video_id,videoService,vimeoService,site){var vm=this;init();vm.close=close;vm.logo_mark=site.logoMark;function init(){videoService.find(video_id).then(function(result){vm.video=result.data;return vimeoService.find(vm.video.vimeo_id).then(function(data){vm.vimeo=data})})}function close(){$modalInstance.close()}}})(angular.module("app"),angular);(function(module){"use strict";module.factory("videosService",service);service.$inject=["$http"];function service($http){return{find:function(id){return $http.get("/api/videos/"+id)}}}})(angular.module("app"));(function(module){"use strict";module.factory("vimeoService",service);service.$inject=["$http"];function service($http){return{find:function(vimeo_id){var endpoint="http://vimeo.com/api/v2/video/"+vimeo_id+".json?callback=JSON_CALLBACK";return $http.jsonp(endpoint).then(function(result){return result.data[0]})}}}})(angular.module("app"));